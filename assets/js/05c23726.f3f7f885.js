"use strict";(self.webpackChunkexperimenter_docs=self.webpackChunkexperimenter_docs||[]).push([[9805],{4137:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=p(n),d=i,h=m["".concat(l,".").concat(d)]||m[d]||c[d]||o;return n?r.createElement(h,a(a({ref:t},u),{},{components:n})):r.createElement(h,a({ref:t},u))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[m]="string"==typeof e?e:i,a[1]=s;for(var p=2;p<o;p++)a[p]=n[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2392:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var r=n(7462),i=(n(7294),n(4137));const o={id:"android-microsurveys",title:"Android Microsurveys",slug:"/messaging/android-microsurveys",sidebar_position:8},a=void 0,s={unversionedId:"workflow/implementing/messaging/android-microsurveys",id:"workflow/implementing/messaging/android-microsurveys",title:"Android Microsurveys",description:"Introduction",source:"@site/docs/workflow/implementing/messaging/mobile-microsurveys.md",sourceDirName:"workflow/implementing/messaging",slug:"/messaging/android-microsurveys",permalink:"/messaging/android-microsurveys",draft:!1,editUrl:"https://github.com/mozilla/experimenter-docs/edit/main/docs/workflow/implementing/messaging/mobile-microsurveys.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{id:"android-microsurveys",title:"Android Microsurveys",slug:"/messaging/android-microsurveys",sidebar_position:8},sidebar:"sidebar",previous:{title:"Mobile Messaging",permalink:"/messaging/mobile-messaging"},next:{title:"Groups & Campaigns",permalink:"/messaging/groups-and-campaigns"}},l={},p=[{value:"Introduction",id:"introduction",level:2},{value:"The prompt",id:"the-prompt",level:2},{value:"The sheet",id:"the-sheet",level:2},{value:"Survey JSON recipe",id:"survey-json-recipe",level:2},{value:"Customize the prompt",id:"customize-the-prompt",level:2},{value:"Customize the sheet",id:"customize-the-sheet",level:2},{value:"Triggers",id:"triggers",level:2}],u={toc:p},m="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(m,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"The microsurvey feature is an extension of the ",(0,i.kt)("a",{parentName:"p",href:"/messaging/mobile-messaging"},"messaging framework"),", and adds new functionality to target small surveys directly in the app. It allows us to capture user\u2019s sentiment on any specific app\u2019s features."),(0,i.kt)("p",null,"It\u2019s composed the of two main user interfaces:"),(0,i.kt)("h2",{id:"the-prompt"},"The prompt"),(0,i.kt)("p",null,"It is the first UI widget which users see, the prompt is an invitation to start the survey, it\u2019s shown when all the triggers indicated are met, until the user decides to start the survey, choose to cancel or the maximum number of shows is met."),(0,i.kt)("img",{src:"/img/mobile/microsurveys/prompt.png",alt:"Prompt view",className:"img-sm-center"}),(0,i.kt)("br",null),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"This title of the prompt can be customized."),(0,i.kt)("li",{parentName:"ol"},"The button starts the survey and shows the survey sheet."),(0,i.kt)("li",{parentName:"ol"},"The cancel button, dismiss the survey, and it won't be shown anymore to users.")),(0,i.kt)("h2",{id:"the-sheet"},"The sheet"),(0,i.kt)("p",null,"The survey sheet is shown after the user clicks \u201cContinue\u201d in the prompt, here the user will be able to fill the survey. It will be shown until the user clicks the \u201cX\u201d button (1) or drag down the sheet, which will make the prompt visible again."),(0,i.kt)("img",{src:"/img/mobile/microsurveys/sheet.png",alt:"Sheet view",className:"img-sm-center"}),(0,i.kt)("br",null),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The close button which will hide the sheet and show the prompt."),(0,i.kt)("li",{parentName:"ol"},"The submit button which will send the survey result if at least one field is selected."),(0,i.kt)("li",{parentName:"ol"},"The question and options both can be customized.")),(0,i.kt)("h2",{id:"survey-json-recipe"},"Survey JSON recipe"),(0,i.kt)("p",null,"Microsurveys are built on top of the already existing ",(0,i.kt)("a",{parentName:"p",href:"/messaging/mobile-messaging"},"messaging framework"),", with an extra field called ",(0,i.kt)("inlineCode",{parentName:"p"},"microsurvey-config"),"  to control the survey, if you are not familiar please take a look at it first."),(0,i.kt)("h2",{id:"customize-the-prompt"},"Customize the prompt"),(0,i.kt)("p",null,"On the prompt, you can customize the title by using the same ",(0,i.kt)("inlineCode",{parentName:"p"},"title")," field as normal message, for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "messages": {\n    "feature-print-microsurvey": {\n      "title": "microsurvey_prompt_printing_title"\n    }\n  }\n}\n\n')),(0,i.kt)("p",null,"You can either provide a ",(0,i.kt)("inlineCode",{parentName:"p"},"string")," containing the text that you would like to show or reference a string bundled with the app. The latter is the preferred method so the survey can support multiple languages."),(0,i.kt)("h2",{id:"customize-the-sheet"},"Customize the sheet"),(0,i.kt)("p",null,"In the sheet we can control the question, answers and UTM parameters for the privacy policy link."),(0,i.kt)("p",null,"For the question, just use the ",(0,i.kt)("inlineCode",{parentName:"p"},"text")," field at the same level as the ",(0,i.kt)("inlineCode",{parentName:"p"},"title")," one, similar to the latter where you can provide either a string or a bundled string id."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "messages": {\n    "feature-print-microsurvey": {\n      "title": "microsurvey_prompt_printing_title",\n      "text": "microsurvey_survey_printing_title"\n    }\n  }\n}\n\n')),(0,i.kt)("p",null,"To customize answers and UTM parameters, we have to include the ",(0,i.kt)("inlineCode",{parentName:"p"},"microsurvey-config")," field object. For the answers just include a field called ",(0,i.kt)("inlineCode",{parentName:"p"},"answers"),". This is an array of each possible answer and it should contain two properties:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"text"),", a string or bundled string of the text for the question"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("inlineCode",{parentName:"li"},"ordering")," indicates the order of the answer in the answers. If no value is provided the default value will be 0. ",(0,i.kt)("strong",{parentName:"li"},"Note"),": The answers are displayed top to bottom e.g. 0 will be the first/top item, 1 will be next and so on. ",(0,i.kt)("strong",{parentName:"li"},"Always")," set either ",(0,i.kt)("strong",{parentName:"li"},"ALL")," the provided answers ordering or ",(0,i.kt)("strong",{parentName:"li"},"NONE")," else you may get unexpected ordering. If ALL answers are default (or manually set to 0), the ordering used will be the same as defined in the array.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "messages": {\n    "feature-print-microsurvey": {\n      "title": "microsurvey_prompt_printing_title",\n      "microsurvey-config": {\n        "utm-content": "homepage",\n        "answers": [\n          {\n            "text": "likert_scale_option_1",\n            "ordering": 0\n          },\n          {\n            "text": "likert_scale_option_2",\n            "ordering": 1\n          },\n          {\n            "text": "likert_scale_option_3",\n            "ordering": 2\n          },\n          {\n            "text": "likert_scale_option_4",\n            "ordering": 3\n          },\n          {\n            "text": "likert_scale_option_5",\n            "ordering": 4\n          },\n          {\n            "text": "likert_scale_option_6",\n            "ordering": 5\n          }\n        ]\n      }\n    }\n  }\n}\n\n')),(0,i.kt)("p",null,"The icon can be added by using the field ",(0,i.kt)("inlineCode",{parentName:"p"},"icon")," under ",(0,i.kt)("inlineCode",{parentName:"p"},"microsurvey-config"),", you have to provide a valid icon resource id, a full list of possible icons can be found ",(0,i.kt)("a",{parentName:"p",href:"https://searchfox.org/mozilla-central/source/mobile/android/android-components/components/ui/icons/src/main/res/drawable"},"here")," and ",(0,i.kt)("a",{parentName:"p",href:"https://searchfox.org/mozilla-central/source/mobile/android/fenix/app/src/main/res/drawable"},"here"),".\nSomething to keep in, mind is Android usages a special type vector called ",(0,i.kt)("a",{parentName:"p",href:"https://developer.android.com/develop/ui/views/graphics/vector-drawable-resources"},"vector drawables"),", to visualize it you will need Android studio with Fenix source code, ideally if the icon hasn't been use before confirm with the Android team how it will look."),(0,i.kt)("p",null,"For the UTM parameters, just add the ",(0,i.kt)("inlineCode",{parentName:"p"},"utm-content")," field. It's the type string, so you just have to add a ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Query_string"},"query string")," which will be appended to the url of the privacy notice."),(0,i.kt)("p",null,"Below you full example (below example is for \u201cHow satisfied are you with your Firefox homepage?\u201d)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "messages": {\n    "feature-homepage-microsurvey": {\n      "experiment": "{experiment}",\n      "title": "micro_survey_prompt_title",\n      "text": "microsurvey_homepage_title",\n      "surface": "microsurvey",\n      "style": "MICRO_SURVEY",\n      "trigger-if-all": [\n        "SECOND_HOMEPAGE_VIEW"\n      ],\n      "microsurvey-config": {\n        "icon": "mozac_ic_home_24",\n        "utm-content": "homepage",\n        "answers": [\n          {\n            "text": "likert_scale_option_1",\n            "ordering": 0\n          },\n          {\n            "text": "likert_scale_option_2",\n            "ordering": 1\n          },\n          {\n            "text": "likert_scale_option_3",\n            "ordering": 2\n          },\n          {\n            "text": "likert_scale_option_4",\n            "ordering": 3\n          },\n          {\n            "text": "likert_scale_option_5",\n            "ordering": 4\n          },\n          {\n            "text": "likert_scale_option_6",\n            "ordering": 5\n          }\n        ]\n      }\n    }\n  }\n}\n')),(0,i.kt)("h2",{id:"triggers"},"Triggers"),(0,i.kt)("p",null,"Before targeting any specific feature triggers must be added pre landed on the app or included as part of the JSON recipe."),(0,i.kt)("p",null,"At the moment, there are two triggers landed specifically to target features, there are:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"RECENTLY_PRINTED"),": Indicate a user has utilized the printing functionality.\n",(0,i.kt)("inlineCode",{parentName:"p"},"SECOND_HOMEPAGE_VIEW"),": Indicate a user has entered twice to the home screen."),(0,i.kt)("p",null,"For adding more triggers please consult with the engineering team."))}c.isMDXComponent=!0}}]);